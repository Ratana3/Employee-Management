<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Admin Profile</title>
    <!-- base:css -->
    <link
      rel="stylesheet"
      href="../../static/Admin/vendors/mdi/css/materialdesignicons.min.css"
    />
    <link
      rel="stylesheet"
      href="../../static/Admin/vendors/css/vendor.bundle.base.css"
    />
    <!-- endinject -->
    <!-- inject:css -->
    <link rel="stylesheet" href="../../static/Admin/css/style.css" />
    <!-- endinject -->
    <link rel="shortcut icon" href="../../static/Admin/images/favicon.png" />
  </head>
  <body>
    <div class="container-scroller">
      <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="main-panel w-100 documentation">
          <div class="content-wrapper">
            <div class="container-fluid">
              <div class="row">
                <div class="col-12 doc-header">
                  <a class="btn btn-success" href="/dashboard"
                    ><i class="mdi mdi-home mr-2"></i>Back to Home</a
                  >
                  <h1 class="text-primary mt-4"></h1>
                </div>
              </div>
              <div class="row doc-content">
                <!-- Inside your <div class="row doc-content"> block -->
                <div class="col-12 col-md-10 offset-md-1">
                  <!-- Top Full-Width Card (e.g. Overview or Welcome) -->
                  <div class="row">
                    <div class="col-12 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="mb-3">Welcome Back !</h4>
                          <p class="text-muted mb-0">
                            Here you can manage your personal profile.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <!-- Profile Summary -->
                    <div class="col-md-4 grid-margin">
                      <div class="card text-center">
                        <div class="card-body">
                          <img
                            src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                            class="img-lg rounded-circle mb-3"
                            id="profile-preview"
                            alt="Profile Image"
                          />
                          <h4 class="mb-0" id="profile-name">John Doe</h4>
                          <p class="text-muted" id="profile-role">HR Manager</p>
                          <p>
                            <i class="mdi mdi-email"></i>
                            <span id="profile-email">admin@example.com</span>
                          </p>
                          <p>
                            <i class="mdi mdi-phone"></i>
                            <span id="profile-phone">+123456789</span>
                          </p>
                          <!-- Inside the form (Profile Info Tab), add file input for image upload -->
                          <div class="form-group">
                            <label for="adminPicture"
                              >Edit your profile :</label
                            >
                            <input
                              type="file"
                              class="form-control"
                              id="adminPicture"
                              accept="image/*"
                            />
                            <div class="text-center">
                              <img
                                src="../../static/default_resource.png"
                                id="profile-preview-edit"
                                alt="Profile Image Preview"
                                style="
                                  width: 100%;
                                  max-width: 300px;
                                  height: auto;
                                  border-radius: 12px;
                                  margin-top: 10px;
                                  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
                                "
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Tabbed Form Panel -->
                    <div class="col-md-8 grid-margin">
                      <div class="card">
                        <div class="card-body">
                          <ul class="nav nav-tabs" role="tablist">
                            <li class="nav-item">
                              <a
                                class="nav-link active"
                                data-toggle="tab"
                                href="#profile-info"
                                role="tab"
                                >Profile Info</a
                              >
                            </li>
                            <li class="nav-item">
                              <a
                                class="nav-link"
                                data-toggle="tab"
                                href="#change-password"
                                role="tab"
                                >Change Password</a
                              >
                            </li>
                          </ul>
                          <div class="tab-content pt-4">
                            <!-- Profile Info Tab -->
                            <div
                              class="tab-pane fade show active"
                              id="profile-info"
                              role="tabpanel"
                            >
                              <form
                                class="forms-sample"
                                id="admin-profile-form"
                              >
                                <div class="form-group">
                                  <label for="adminFirstName">First Name</label>
                                  <input
                                    type="text"
                                    class="form-control"
                                    id="adminFirstName"
                                    placeholder="First Name"
                                  />
                                </div>
                                <div class="form-group">
                                  <label for="adminLastName">Last Name</label>
                                  <input
                                    type="text"
                                    class="form-control"
                                    id="adminLastName"
                                    placeholder="Last Name"
                                  />
                                </div>
                                <div class="form-group">
                                  <label for="adminDateOfBirth"
                                    >Date of birth</label
                                  >
                                  <input
                                    type="date"
                                    class="form-control"
                                    id="adminDateOfBirth"
                                    placeholder="Date of Birth"
                                  />
                                </div>

                                <div class="form-group">
                                  <label for="adminEmail">Email address</label>
                                  <input
                                    type="email"
                                    class="form-control"
                                    id="adminEmail"
                                    placeholder="Email"
                                  />
                                </div>
                                <div class="form-group">
                                  <label for="adminPhone">Phone Number</label>
                                  <input
                                    type="text"
                                    class="form-control"
                                    id="adminPhone"
                                    placeholder="Phone Number"
                                  />
                                </div>
                                <div class="form-group">
                                  <label for="adminRole">Role</label>
                                  <input
                                    type="text"
                                    class="form-control"
                                    id="adminRole"
                                    readonly
                                  />
                                </div>
                                <button
                                  type="submit"
                                  class="btn btn-primary mr-2"
                                >
                                  Update Profile
                                </button>
                                <button type="reset" class="btn btn-light">
                                  Cancel
                                </button>
                              </form>
                            </div>

                            <!-- Change Password Tab -->
                            <div
                              class="tab-pane fade"
                              id="change-password"
                              role="tabpanel"
                            >
                              <form id="change-password-form">
                                <div class="form-group">
                                  <label for="currentPassword"
                                    >Current Password</label
                                  >
                                  <input
                                    type="password"
                                    class="form-control"
                                    id="currentPassword"
                                    placeholder="Enter current password"
                                  />
                                </div>
                                <div class="form-group">
                                  <label for="newPassword">New Password</label>
                                  <input
                                    type="password"
                                    class="form-control"
                                    id="newPassword"
                                    placeholder="Enter new password"
                                  />
                                </div>
                                <div class="form-group">
                                  <label for="confirmPassword"
                                    >Confirm Password</label
                                  >
                                  <input
                                    type="password"
                                    class="form-control"
                                    id="confirmPassword"
                                    placeholder="Confirm new password"
                                  />
                                </div>
                                <button
                                  type="submit"
                                  class="btn btn-warning mt-2"
                                >
                                  Change Password
                                </button>
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /row -->
                </div>
              </div>
            </div>
          </div>
          <!-- partial:../partials/_footer.html -->
          <footer class="footer">
            <div class="card">
              <div class="card-body">
                <div
                  class="d-sm-flex justify-content-center justify-content-sm-between"
                >
                  <span
                    class="text-muted d-block text-center text-sm-left d-sm-inline-block"
                    >Copyright Â© bootstrapdash.com 2020</span
                  >
                  <span
                    class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"
                  >
                    Free
                    <a href="https://www.bootstrapdash.com/" target="_blank"
                      >Bootstrap dashboard templates</a
                    >
                    from Bootstrapdash.com</span
                  >
                </div>
              </div>
            </div>
          </footer>
          <!-- partial -->
        </div>
      </div>
    </div>

    <!-- Session Conflict Modal -->
    <div
      class="modal fade"
      id="sessionConflictModal"
      tabindex="-1"
      aria-labelledby="sessionConflictLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="sessionConflictLabel">
              Session Conflict
            </h5>
          </div>
          <div class="modal-body">
            <p>
              <strong
                >Someone has logged into your account from another tab or
                device.</strong
              >
            </p>
            <p>You will be logged out for security reasons.</p>
          </div>
          <div class="modal-footer justify-content-center">
            <button class="btn btn-danger" id="confirmLogoutBetweenTabs">
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div class="modal fade" id="logoutModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Logout</h5>
            <button type="button" class="close" id="closeLogoutModal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <p>Are you sure you want to logout?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelLogout">
              Cancel
            </button>
            <button type="button" class="btn btn-danger" id="confirmLogout">
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Access Denied Modal -->
    <div
      class="modal fade"
      id="accessDeniedModal"
      tabindex="-1"
      aria-labelledby="accessDeniedLabel"
      aria-hidden="true"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-danger">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="accessDeniedLabel">Access Denied</h5>
          </div>
          <div class="modal-body">
            <p>Only Super Admins are allowed to access this page.</p>
          </div>
          <div class="modal-footer">
            <button id="redirectBtn" type="button" class="btn btn-danger">
              Go to Dashboard
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Success/Error -->
    <div
      class="modal fade"
      id="feedbackModal"
      tabindex="-1"
      aria-labelledby="feedbackModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header" id="feedbackModalHeader">
            <h5 class="modal-title" id="feedbackModalLabel">Message</h5>
          </div>
          <div class="modal-body" id="feedbackModalBody"></div>
          <div class="modal-footer" id="feedbackModalFooter">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
              id="modalCloseBtn"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Spinner Modal -->
    <div
      class="modal fade"
      id="loadingSpinnerModal"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
      data-backdrop="static"
      data-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content border-0 bg-transparent shadow-none">
          <div class="modal-body text-center">
            <div
              class="spinner-border text-white"
              style="width: 4rem; height: 4rem"
              role="status"
            >
              <span class="sr-only"></span>
            </div>
            <div class="mt-3 text-white font-weight-bold">Please wait...</div>
          </div>
        </div>
      </div>
    </div>

    <!-- base:js -->
    <script src="../../static/Admin/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- inject:js -->
    <script src="../../static/Admin/js/off-canvas.js"></script>
    <script src="../../static/Admin/js/hoverable-collapse.js"></script>
    <script src="../../static/Admin/js/template.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page-->
    <!-- End custom js for this page-->

    <!-- Spinner logic (add once, for all modals and actions) -->
    <script>
      function showSpinner() {
        if (!window._spinnerOpen) {
          $("#loadingSpinnerModal").modal({
            backdrop: "static",
            keyboard: false,
          });
          window._spinnerOpen = true;
        }
      }
      function hideSpinner() {
        $("#loadingSpinnerModal").modal("hide");
        window._spinnerOpen = false;
      }
    </script>

    <!-- Script for displaying profile details for admin (Start) -->
    <script>
      /**
       * Helper function to show a Bootstrap modal for feedback messages.
       * options: {title, type, reload, redirect, autoClose}
       */
      function showModal(message, options = {}) {
        const label = document.getElementById("feedbackModalLabel");
        const body = document.getElementById("feedbackModalBody");
        const header = document.getElementById("feedbackModalHeader");
        label.textContent =
          options.title || (options.type === "error" ? "Error" : "Success");
        body.textContent = message;

        header.classList.remove(
          "bg-success",
          "bg-danger",
          "bg-info",
          "bg-warning",
          "text-white"
        );
        if (options.type === "error") {
          header.classList.add("bg-danger", "text-white");
        } else if (options.type === "success") {
          header.classList.add("bg-success", "text-white");
        } else {
          header.classList.add("bg-info", "text-white");
        }

        const modalEl = document.getElementById("feedbackModal");
        const modal = new bootstrap.Modal(modalEl);
        modal.show();

        const closeBtn = document.getElementById("modalCloseBtn");
        closeBtn.onclick = () => {
          modal.hide();
          if (options.reload) location.reload();
          if (options.redirect) window.location.href = options.redirect;
        };

        if (options.autoClose) {
          setTimeout(() => {
            modal.hide();
            if (options.reload) location.reload();
            if (options.redirect) window.location.href = options.redirect;
          }, options.autoClose);
        }
      }
      document.addEventListener("DOMContentLoaded", () => {
        const token = sessionStorage.getItem("adminToken");
        if (!token) {
          showModal("Not authenticated. Redirecting to login.", {
            type: "error",
            title: "Authentication Required",
            redirect: "/admin_login",
            autoClose: 2000,
          });
          return;
        }

        function showNoAccess(section = "profile") {
          document
            .getElementById("adminFirstName")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("adminLastName")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("adminDateOfBirth")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("adminEmail")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("adminPhone")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("adminRole")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("admin-profile-form")
            ?.querySelectorAll("button")
            .forEach((btn) => btn.setAttribute("disabled", "disabled"));
          document
            .getElementById("currentPassword")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("newPassword")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("confirmPassword")
            ?.setAttribute("disabled", "disabled");
          document
            .getElementById("change-password-form")
            ?.querySelectorAll("button")
            .forEach((btn) => btn.setAttribute("disabled", "disabled"));
          document
            .getElementById("adminPicture")
            ?.setAttribute("disabled", "disabled");
          let noAccessAlert = document.getElementById("noAccessAlert");
          if (!noAccessAlert) {
            noAccessAlert = document.createElement("div");
            noAccessAlert.id = "noAccessAlert";
            noAccessAlert.className = "alert alert-danger mt-2";
            noAccessAlert.innerText =
              "You do not have access to view or edit your profile.";
            const container =
              document.querySelector(".doc-header") || document.body;
            container.appendChild(noAccessAlert);
          }
          showModal("You do not have access to view or edit your profile.", {
            type: "error",
            title: "Access Denied",
          });
        }

        showSpinner();
        fetch("/api/profile_details", {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        })
          .then((res) => {
            hideSpinner();
            if (res.status === 401) {
              sessionStorage.removeItem("adminToken");
              showModal("Session expired. Redirecting to login.", {
                type: "error",
                title: "Session Expired",
                redirect: "/admin_login",
                autoClose: 2000,
              });
              return;
            }
            if (res.status === 403) {
              showNoAccess();
              throw new Error("forbidden");
            }
            if (!res.ok) throw new Error("Failed to fetch profile details");
            return res.json();
          })
          .then((data) => {
            if (!data) return;
            document.getElementById("adminFirstName").value =
              data.first_name || "";
            document.getElementById("adminLastName").value =
              data.last_name || "";
            function toDateInputValue(dateString) {
              if (!dateString) return "";
              if (/^\d{4}-\d{2}-\d{2}/.test(dateString))
                return dateString.slice(0, 10);
              const d = new Date(dateString);
              if (isNaN(d)) return "";
              return d.toISOString().slice(0, 10);
            }
            document.getElementById("adminDateOfBirth").value =
              toDateInputValue(data.date_of_birth);
            document.getElementById("profile-name").innerText = `${
              data.first_name || ""
            } ${data.last_name || ""}`;
            document.getElementById("adminEmail").value = data.email;
            document.getElementById("adminPhone").value = data.phone;
            document.getElementById("adminRole").value = data.role;

            const img = document.getElementById("profile-preview");
            const profilePicUrl =
              data.profile_picture || "../../static/default_resource.png";
            if (profilePicUrl.startsWith("/profile-picture")) {
              const cacheBustedUrl = profilePicUrl + "?t=" + Date.now();
              fetch(cacheBustedUrl, {
                headers: { Authorization: `Bearer ${token}` },
              })
                .then((res) => {
                  if (!res.ok)
                    throw new Error("Unable to fetch profile picture");
                  return res.blob();
                })
                .then((blob) => {
                  img.src = URL.createObjectURL(blob);
                })
                .catch((err) => {
                  img.src = "../../static/default_resource.png";
                });
            } else {
              img.src = profilePicUrl;
            }
            document.getElementById("profile-email").innerText = data.email;
            document.getElementById("profile-phone").innerText = data.phone;
            document.getElementById("profile-role").innerText = data.role;
          })
          .catch((error) => {
            hideSpinner();
            if (error.message !== "forbidden") {
              showModal(
                "Unable to load profile details. Please try again later.",
                {
                  type: "error",
                  title: "Load Error",
                }
              );
            }
          });

        const fileInput = document.getElementById("adminPicture");
        if (fileInput) {
          fileInput.addEventListener("change", function () {
            const file = this.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = function (e) {
                const previewImg = document.getElementById(
                  "profile-preview-edit"
                );
                previewImg.src = e.target.result;
              };
              reader.readAsDataURL(file);
            }
          });
        }

        const adminProfileForm = document.getElementById("admin-profile-form");
        if (adminProfileForm) {
          adminProfileForm.addEventListener("submit", function (e) {
            e.preventDefault();
            const formData = new FormData();
            formData.append(
              "first_name",
              document.getElementById("adminFirstName").value
            );
            formData.append(
              "last_name",
              document.getElementById("adminLastName").value
            );
            formData.append(
              "date_of_birth",
              document.getElementById("adminDateOfBirth").value
            );
            formData.append(
              "email",
              document.getElementById("adminEmail").value
            );
            formData.append(
              "phone",
              document.getElementById("adminPhone").value
            );
            const fileInput = document.getElementById("adminPicture");
            if (fileInput && fileInput.files.length > 0) {
              formData.append("profile_picture", fileInput.files[0]);
            }
            showSpinner();
            fetch("/api/profile_details", {
              method: "POST",
              headers: { Authorization: `Bearer ${token}` },
              body: formData,
            })
              .then((res) => {
                hideSpinner();
                if (res.status === 401) {
                  sessionStorage.removeItem("adminToken");
                  showModal("Session expired. Redirecting to login.", {
                    type: "error",
                    title: "Session Expired",
                    redirect: "/admin_login",
                    autoClose: 2000,
                  });
                  return;
                }
                if (res.status === 403) {
                  showNoAccess();
                  throw new Error("forbidden");
                }
                if (!res.ok) throw new Error("Profile update failed");
                return res.json();
              })
              .then((data) => {
                if (!data) return;
                showModal(data.message || "Profile updated successfully!", {
                  type: "success",
                  title: "Profile Updated",
                  reload: true,
                  autoClose: 1500,
                });
              })
              .catch((error) => {
                hideSpinner();
                if (error.message !== "forbidden") {
                  showModal("Failed to update profile.", {
                    type: "error",
                    title: "Update Failed",
                  });
                }
              });
          });
        }

        const changePasswordForm = document.getElementById(
          "change-password-form"
        );
        if (changePasswordForm) {
          changePasswordForm.addEventListener("submit", function (e) {
            e.preventDefault();
            const currentPassword =
              document.getElementById("currentPassword").value;
            const newPassword = document.getElementById("newPassword").value;
            const confirmPassword =
              document.getElementById("confirmPassword").value;
            if (newPassword !== confirmPassword) {
              showModal("New passwords do not match.", {
                type: "error",
                title: "Password Error",
              });
              return;
            }
            const formData = new FormData();
            formData.append("current_password", currentPassword);
            formData.append("new_password", newPassword);
            showSpinner();
            fetch("/api/profile_details", {
              method: "POST",
              headers: { Authorization: `Bearer ${token}` },
              body: formData,
            })
              .then((res) => {
                hideSpinner();
                if (res.status === 401) {
                  sessionStorage.removeItem("adminToken");
                  showModal("Session expired. Redirecting to login.", {
                    type: "error",
                    title: "Session Expired",
                    redirect: "/admin_login",
                    autoClose: 2000,
                  });
                  return;
                }
                if (res.status === 403) {
                  showNoAccess();
                  throw new Error("forbidden");
                }
                if (!res.ok) throw new Error("Password change failed");
                return res.json();
              })
              .then((data) => {
                if (!data) return;
                showModal(data.message || "Password changed successfully.", {
                  type: "success",
                  title: "Password Changed",
                });
                document.getElementById("change-password-form").reset();
              })
              .catch((error) => {
                hideSpinner();
                if (error.message !== "forbidden") {
                  showModal(
                    "Failed to change password. Please check your current password.",
                    {
                      type: "error",
                      title: "Password Error",
                    }
                  );
                }
              });
          });
        }
      });
    </script>
    <!-- Script for displaying profile details for admin (End) -->

    <!-- Script for redirect admin back to the login page when someone else logged in from another tab (Start) -->
    <script>
      function getToken() {
        return sessionStorage.getItem("adminToken");
      }

      function checkSessionConflict() {
        const token = getToken();
        if (!token) return;

        showSpinner();
        fetch("/check_jti", {
          method: "GET",
          headers: {
            Authorization: "Bearer " + token,
          },
        })
          .then((response) => {
            hideSpinner();
            if (response.status === 403) {
              throw new Error("session_conflict");
            }
            return response.json();
          })
          .then((data) => {
            if (data.error === "session_conflict") {
              throw new Error("session_conflict");
            }
          })
          .catch((err) => {
            hideSpinner();
            if (err.message === "session_conflict") {
              const modal = new bootstrap.Modal(
                document.getElementById("sessionConflictModal"),
                {
                  backdrop: "static",
                  keyboard: false,
                }
              );
              modal.show();
              const logoutBtn = document.getElementById(
                "confirmLogoutBetweenTabs"
              );
              if (!logoutBtn.dataset.bound) {
                logoutBtn.addEventListener("click", () => {
                  showSpinner();
                  setTimeout(function () {
                    sessionStorage.removeItem("adminToken");
                    window.location.href = "/admin_login";
                  }, 600);
                });
                logoutBtn.dataset.bound = "true";
              }
            }
          });
      }

      checkSessionConflict();
      setInterval(checkSessionConflict, 30000);
    </script>
    <!-- Script for redirect admin back to the login page when someone else logged in from another tab (End) -->

    <!-- Script for checking admin if they have access to this page (Start) -->
    <script>
      // Only run this if the backend passed access_denied = True
      const accessDenied = {{ 'true' if access_denied else 'false' }};
      if (accessDenied) {
        const accessModal = new bootstrap.Modal(document.getElementById("accessDeniedModal"));
        accessModal.show();

        document.getElementById("forceLogoutBtn").addEventListener("click", function () {
          showSpinner();
          setTimeout(function() {
            sessionStorage.removeItem("adminToken");
            window.location.href = "/admin_login";
          }, 600);
        });
      }
    </script>
    <!-- Script for checking admin if they have access to this page (End) -->

    <!-- Script that redirects admin back to login page if the token doesn't exist (Start) -->
    <script>
      const token = getToken();
      if (!token) {
        showSpinner();
        setTimeout(function () {
          alert("Not authenticated. Redirecting to login.");
          window.location.href = "/admin_login";
        }, 600);
      }
    </script>
    <!-- Script that redirects admin back to login page if the token doesn't exist (End) -->
  </body>
</html>
